# ğŸ“ Student Marketplace - Há»‡ thá»‘ng Trao Ä‘á»•i & BÃ¡n Dá»¥ng cá»¥ Há»c táº­p

Má»™t ná»n táº£ng trá»±c tuyáº¿n toÃ n diá»‡n cho phÃ©p sinh viÃªn Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p báº±ng email sinh viÃªn há»£p lá»‡, táº¡o vÃ  quáº£n lÃ½ cÃ¡c bÃ i Ä‘Äƒng bÃ¡n hoáº·c trao Ä‘á»•i dá»¥ng cá»¥ há»c táº­p.

---

## ğŸ“‹ Má»¥c lá»¥c

- [TÃ­nh nÄƒng chÃ­nh](#-tÃ­nh-nÄƒng-chÃ­nh)
- [Tech Stack](#-tech-stack)
- [CÃ i Ä‘áº·t & Cháº¡y dá»± Ã¡n](#-cÃ i-Ä‘áº·t--cháº¡y-dá»±-Ã¡n)
- [ÄÃ³ng gÃ³i Docker](#-Ä‘Ã³ng-gÃ³i-docker)
- [Truy cáº­p tá»« Ä‘iá»‡n thoáº¡i (Ngrok)](#-truy-cáº­p-tá»«-Ä‘iá»‡n-thoáº¡i-ngrok)
- [Responsive Design](#-responsive-design)
- [API Documentation](#-api-documentation)

---

## ğŸŒŸ TÃ­nh nÄƒng chÃ­nh

### Cho sinh viÃªn:

- ğŸ“ **ÄÄƒng kÃ½ & ÄÄƒng nháº­p**: XÃ¡c thá»±c email sinh viÃªn thÃ´ng qua link xÃ¡c minh
- ğŸ“¢ **Táº¡o & Quáº£n lÃ½ bÃ i Ä‘Äƒng**: BÃ¡n hoáº·c trao Ä‘á»•i dá»¥ng cá»¥ há»c táº­p
- ğŸ” **TÃ¬m kiáº¿m & Lá»c**: TÃ¬m bÃ i Ä‘Äƒng theo danh má»¥c, tÃ¬nh tráº¡ng, giÃ¡ cáº£
- ğŸ’¬ **BÃ¬nh luáº­n & ÄÃ¡nh giÃ¡**: TÆ°Æ¡ng tÃ¡c vá»›i ngÆ°á»i bÃ¡n
- ğŸ’¬ **Chat Real-time**: LiÃªn há»‡ trá»±c tiáº¿p vá»›i ngÆ°á»i bÃ¡n
- ğŸ“Š **Xem chi tiáº¿t bÃ i Ä‘Äƒng**: HÃ¬nh áº£nh, mÃ´ táº£, Ä‘Ã¡nh giÃ¡ ngÆ°á»i bÃ¡n
- ğŸš© **BÃ¡o cÃ¡o vi pháº¡m**: Gá»­i bÃ¡o cÃ¡o khi phÃ¡t hiá»‡n ná»™i dung khÃ´ng phÃ¹ há»£p
- â­ **Há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡**: ÄÃ¡nh giÃ¡ ngÆ°á»i bÃ¡n dá»±a trÃªn cháº¥t lÆ°á»£ng dá»‹ch vá»¥

### Cho quáº£n trá»‹ viÃªn (Admin):

- âœ… **Duyá»‡t bÃ i Ä‘Äƒng**: PhÃª duyá»‡t hoáº·c tá»« chá»‘i bÃ i Ä‘Äƒng ban Ä‘áº§u
- ğŸ” **Quáº£n lÃ½ bÃ¡o cÃ¡o**: Xem vÃ  xá»­ lÃ½ bÃ¡o cÃ¡o vi pháº¡m
- ğŸ” **KhÃ³a/Má»Ÿ tÃ i khoáº£n**: KhÃ³a hoáº·c má»Ÿ tÃ i khoáº£n sinh viÃªn vi pháº¡m
- ğŸ“Š **Thá»‘ng kÃª**: Theo dÃµi hoáº¡t Ä‘á»™ng trÃªn ná»n táº£ng

# Student Marketplace â€” HÆ°á»›ng dáº«n cÃ i Ä‘áº·t & kiá»ƒm thá»­

PhiÃªn báº£n rÃºt gá»n vÃ  cáº­p nháº­t cá»§a README cho dá»± Ã¡n "Student Marketplace".

> NOTE: TÃ­nh nÄƒng "Audit Logs" Ä‘Ã£ bá»‹ gá»¡ khá»i mÃ£ nguá»“n â€” cÃ¡c API, trang vÃ  hÆ°á»›ng dáº«n liÃªn quan sáº½ khÃ´ng cÃ²n hoáº¡t Ä‘á»™ng.

---

## Má»¥c lá»¥c

- Giá»›i thiá»‡u
- YÃªu cáº§u há»‡ thá»‘ng
- Cáº¥u trÃºc dá»± Ã¡n
- CÃ i Ä‘áº·t & cháº¡y (Backend / Frontend)
- Biáº¿n mÃ´i trÆ°á»ng (máº«u)
- Lá»‡nh há»¯u Ã­ch
- API chÃ­nh & vÃ­ dá»¥
- HÆ°á»›ng dáº«n kiá»ƒm thá»­ báº±ng Postman (Login, Create/Edit/Delete Post)
- XÃ³a collection Audit (náº¿u cáº§n)
- LiÃªn há»‡

---

## Giá»›i thiá»‡u

Má»™t ná»n táº£ng trao Ä‘á»•i vÃ  mua bÃ¡n Ä‘á»“ dÃ¹ng há»c táº­p cho sinh viÃªn, gá»“m backend báº±ng Node/Express + MongoDB vÃ  frontend báº±ng React.

---

## YÃªu cáº§u há»‡ thá»‘ng

- Node.js v16+ (LTS)
- npm hoáº·c yarn
- MongoDB (local) hoáº·c MongoDB Atlas

---

## Cáº¥u trÃºc dá»± Ã¡n (tÃ³m táº¯t)

- `Backend/` â€” server Express, models, controllers, routes
- `Frontent/` â€” React app (ghi chÃº tÃªn thÆ° má»¥c giá»¯ nguyÃªn nhÆ° trong repo)
- `mongo-backup/` â€” chá»©a báº£n sao dá»¯ liá»‡u náº¿u cÃ³

---

## CÃ i Ä‘áº·t & cháº¡y

### 1) Backend

```bash
cd Backend
npm install
# Táº¡o file .env tá»« máº«u .env.example vÃ  cáº­p nháº­t cÃ¡c biáº¿n cáº§n thiáº¿t
# VÃ­ dá»¥: MONGODB_URI, JWT_SECRET, EMAIL_...
npm run dev
```

Server máº·c Ä‘á»‹nh cháº¡y trÃªn `http://localhost:5000`.

### 2) Frontend

```bash
cd Frontent
npm install
npm start
```

Frontend máº·c Ä‘á»‹nh cháº¡y trÃªn `http://localhost:3000`.

---

## Biáº¿n mÃ´i trÆ°á»ng (máº«u)

Táº¡o `Backend/.env` chá»©a Ã­t nháº¥t:

- `MONGODB_URI` â€” connection string MongoDB
- `PORT` â€” (vÃ­ dá»¥ 5000)
- `JWT_SECRET`
- Email SMTP config náº¿u cáº§n gá»­i mail

---

## Lá»‡nh há»¯u Ã­ch

- Khá»Ÿi Ä‘á»™ng Docker (náº¿u cáº¥u hÃ¬nh):

```bash
docker-compose up -d --build
```

- Backup dá»¯ liá»‡u (script cÃ³ sáºµn):

Windows PowerShell:

```powershell
.\backup-local-data.ps1
```

Bash:

```bash
./backup-local-data.sh
```

---

## API chÃ­nh (tÃ³m táº¯t)

TÃ i liá»‡u dÆ°á»›i Ä‘Ã¢y trÃ¬nh bÃ y cÃ¡c endpoint quan trá»ng Ä‘á»ƒ test tÃ­nh nÄƒng ngÆ°á»i dÃ¹ng.

Base URL (dev): `http://localhost:5000/api`

Auth

- `POST /auth/register` â€” Ä‘Äƒng kÃ½
- `POST /auth/login` â€” Ä‘Äƒng nháº­p (tráº£ vá» token JWT)
- `POST /auth/logout` â€” Ä‘Äƒng xuáº¥t

Posts

- `GET /posts` â€” láº¥y danh sÃ¡ch
- `GET /posts/:id` â€” xem chi tiáº¿t
- `POST /posts` â€” táº¡o bÃ i (yÃªu cáº§u Authorization)
- `PUT /posts/:id` â€” cáº­p nháº­t bÃ i (yÃªu cáº§u Authorization)
- `DELETE /posts/:id` â€” xÃ³a bÃ i (yÃªu cáº§u Authorization)

Comments, Reports, Users: tÆ°Æ¡ng tá»± â€” xem trong mÃ£ nguá»“n `Backend/routes` náº¿u cáº§n chi tiáº¿t.

---

## HÆ°á»›ng dáº«n kiá»ƒm thá»­ báº±ng Postman

DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c bÆ°á»›c cá»¥ thá»ƒ Ä‘á»ƒ kiá»ƒm thá»­ tÃ­nh nÄƒng cÆ¡ báº£n: Ä‘Äƒng nháº­p, táº¡o bÃ i, sá»­a bÃ i, xÃ³a bÃ i.

Chuáº©n bá»‹:

- Má»Ÿ Postman
- Táº¡o environment (vÃ­ dá»¥ `Local`) vÃ  thÃªm biáº¿n `baseUrl = http://localhost:5000/api` vÃ  biáº¿n `token` (Ä‘á»ƒ lÆ°u JWT sau khi login)

1.  Login (láº¥y token)

- Method: POST
- URL: `{{baseUrl}}/auth/login`
- Body (JSON):

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

- Tests (Postman) â€” lÆ°u token tá»± Ä‘á»™ng:

```javascript
// Trong tab Tests cá»§a request login
const json = pm.response.json();
if (json && json.token) {
  pm.environment.set("token", json.token);
}
```

- Sau khi cháº¡y: kiá»ƒm tra `Environment` â†’ biáº¿n `token` Ä‘Ã£ Ä‘Æ°á»£c set.

2.  Táº¡o bÃ i viáº¿t (Create Post)

- Method: POST
- URL: `{{baseUrl}}/posts`
- Headers:
  - `Authorization: Bearer {{token}}`
  - (náº¿u gá»­i JSON) `Content-Type: application/json`
- Body (JSON) vÃ­ dá»¥:

```json
{
  "title": "BÃ¡n sÃ¡ch Láº­p trÃ¬nh C cÆ¡ báº£n",
  "description": "SÃ¡ch cÃ²n má»›i, 200 trang",
  "category": "<categoryId>",
  "postType": "sell",
  "price": 100000,
  "condition": "like_new"
}
```

- Náº¿u API cháº¥p nháº­n upload hÃ¬nh (multipart/form-data): chá»n `form-data`, thÃªm field tÆ°Æ¡ng á»©ng `images` (type `file`) cÃ¹ng cÃ¡c trÆ°á»ng text.

- Káº¿t quáº£ mong Ä‘á»£i: HTTP 201 vá»›i object bÃ i Ä‘Äƒng vÃ  `createdBy`/`_id`.

- LÆ°u `postId` Ä‘á»ƒ dÃ¹ng cho edit/delete (báº¡n cÃ³ thá»ƒ lÆ°u vÃ o environment: `pm.environment.set("postId", response.json().post._id)` trong Tests).

3.  Chá»‰nh sá»­a bÃ i viáº¿t (Edit Post)

- Method: PUT
- URL: `{{baseUrl}}/posts/{{postId}}`
- Headers:
  - `Authorization: Bearer {{token}}`
  - `Content-Type: application/json`
- Body (JSON) vÃ­ dá»¥:

```json
{
  "title": "BÃ¡n sÃ¡ch Láº­p trÃ¬nh C - cáº­p nháº­t",
  "price": 90000
}
```

- Káº¿t quáº£ mong Ä‘á»£i: HTTP 200 vÃ  object bÃ i Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t.

4.  XÃ³a bÃ i viáº¿t (Delete Post)

- Method: DELETE
- URL: `{{baseUrl}}/posts/{{postId}}`
- Headers:

  - `Authorization: Bearer {{token}}`

- Káº¿t quáº£ mong Ä‘á»£i: HTTP 200 vÃ  thÃ´ng bÃ¡o thÃ nh cÃ´ng.

5.  CÃ¡c lÆ°u Ã½ khi kiá»ƒm thá»­

- Äáº£m báº£o `token` Ä‘Æ°á»£c set trÆ°á»›c khi gá»i cÃ¡c API cáº§n xÃ¡c thá»±c.
- Náº¿u gáº·p lá»—i 401/403: kiá»ƒm tra token cÃ²n hiá»‡u lá»±c hay user cÃ³ quyá»n thao tÃ¡c (owner/admin).
- Kiá»ƒm tra response body Ä‘á»ƒ biáº¿t cáº¥u trÃºc lá»—i (thÆ°á»ng tráº£ vá» `thÃ nh_cÃ´ng: false` vÃ  `tin_nhan`).

---

## XÃ³a collection Audit (náº¿u cÃ²n tá»“n táº¡i)

Náº¿u trÆ°á»›c Ä‘Ã³ cÃ³ collection audit lÆ°u trá»¯ trong Mongo vÃ  báº¡n muá»‘n xoÃ¡ hoÃ n toÃ n (vÃ­ dá»¥ tÃªn collection lÃ  `auditlogs`), cháº¡y lá»‡nh trÃªn Mongo shell:

```js
use nha-cho-sinh-vien
db.getCollection('auditlogs').drop()
// Hoáº·c tÃ¹y tÃªn collection, vÃ­ dá»¥ 'auditlogs' / 'audit_logs'...
```

Hoáº·c dÃ¹ng MongoDB Compass Ä‘á»ƒ xÃ³a collection.

---

## Ghi chÃº quan trá»ng

- CÃ¡c file liÃªn quan Ä‘áº¿n Audit Logs Ä‘Ã£ Ä‘Æ°á»£c gá»¡ hoáº·c chuyá»ƒn thÃ nh stub Ä‘á»ƒ trÃ¡nh lÃ m há»ng há»‡ thá»‘ng. Náº¿u báº¡n muá»‘n khÃ´i phá»¥c tÃ­nh nÄƒng Audit Logs, cáº§n tháº£o luáº­n vá» cÃ¡ch triá»ƒn khai láº¡i vÃ  báº£ng schema trong MongoDB.

---

## LiÃªn há»‡

Náº¿u cáº§n há»— trá»£ thÃªm hoáº·c muá»‘n tÃ´i thá»±c hiá»‡n xÃ³a váº­t lÃ½ file/thu má»¥c cÃ²n sÃ³t vÃ  commit thay Ä‘á»•i, cho biáº¿t â€” tÃ´i sáº½ thá»±c hiá»‡n tiáº¿p.

---

**PhiÃªn báº£n README:** cáº­p nháº­t tá»± Ä‘á»™ng
